!function(t){"use strict";const e=t("#app"),a=t("#videoGrid"),i=t("#emptyState"),s=t("#pager"),n="gases",o=9;let c=n,r="*",l=1;const d=t=>String(t||"").trim().toLowerCase();function p(e){const a=String(e.attr("data-src")||"").trim();if(!a)return;const i=()=>{e.empty()};function s(t){const e=String(t||"").trim().toLowerCase();return e.startsWith("javascript:")||e.startsWith("data:")||e.startsWith("vbscript:")}if(/youtu\.?be|youtube\.com/i.test(a)){const s=function(t){const e=String(t||"");let a=e.match(/youtube\.com\/shorts\/([A-Za-z0-9_-]{6,})/i);return a?a[1]:(a=e.match(/[?&]v=([A-Za-z0-9_-]{6,})/i),a?a[1]:(a=e.match(/youtu\.be\/([A-Za-z0-9_-]{6,})/i),a?a[1]:""))}(a);if(!s)return;const n=`https://i.ytimg.com/vi/${encodeURIComponent(s)}/hqdefault.jpg`,o=`https://www.youtube.com/watch?v=${encodeURIComponent(s)}`;i();const c=t("<a/>",{class:"yt-thumb",href:o,target:"_blank",rel:"noopener"}).css({display:"block",width:"100%",height:"100%",position:"relative"}),r=t("<img/>",{src:n,alt:"YouTube"}).css({width:"100%",height:"100%",objectFit:"cover",display:"block"}),l=t("<span/>").css({position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"}),d=t("<span/>").css({width:"60px",height:"60px",borderRadius:"999px",background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center"}),p=t("<span/>").css({display:"block",width:0,height:0,borderLeft:"18px solid #fff",borderTop:"12px solid transparent",borderBottom:"12px solid transparent",marginLeft:"3px"});return d.append(p),l.append(d),c.append(r,l),e.append(c),e.off("click.pl").on("click.pl","a.yt-thumb",(function(a){if("file:"===location.protocol)return;a.preventDefault();const n=`https://www.youtube.com/embed/${encodeURIComponent(s)}?rel=0&playsinline=1&autoplay=1&mute=1`;i();const o=t("<iframe/>",{src:n,frameborder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}).css({width:"100%",height:"100%"});e.append(o)})),void e.data("mounted",1)}if(/\.(mp4|webm|ogg)(\?|#|$)/i.test(a)){if(s(a))return;const n=String(e.attr("data-poster")||"").trim(),o=n&&!s(n)?n:"";i();const c=t("<video/>",{controls:!0,preload:"metadata",playsinline:!0}).css({width:"100%",height:"100%"});o&&c.attr("poster",o);let r="video/mp4";/\.webm(\?|#|$)/i.test(a)?r="video/webm":/\.ogg(\?|#|$)/i.test(a)&&(r="video/ogg");const l=t("<source/>",{src:a,type:r});return c.append(l),e.append(c),void e.data("mounted",1)}}function u(t){t?(a.hide(),i.show()):(i.hide(),a.css("display","grid").show())}function f(){return a.find(".video-card")}let h=0;function g(){if(!a.length)return;const t=a.outerHeight();t>0&&a.css("min-height",t+"px")}function m(){a.length&&requestAnimationFrame((()=>a.css("min-height","")))}function v(t,e){h++;const a=h,i=window.pageYOffset||document.documentElement.scrollTop||0,s=t-i,n=performance.now(),o=Math.max(120,e||260);if(Math.abs(s)<4)return;requestAnimationFrame((function t(e){if(a!==h)return;const c=Math.min(1,(e-n)/o),r=i+s*(l=c,1-Math.pow(1-l,3));var l;window.scrollTo(0,r),c<1&&requestAnimationFrame(t)}))}function b(){if(!a.length)return;const t=a[0].getBoundingClientRect();v(Math.max(0,(window.pageYOffset||0)+t.top-80),260)}function w(){const e=f(),i=function(){const e=d(c),a=d("*"===r?"":r);return f().filter((function(){const i=t(this),s=d(i.data("cat")),n=d(i.data("sub"));return!(e&&"*"!==e&&s!==e||a&&"*"!==a&&n!==a)}))}(),n=i.length;if(e.hide(),!n)return u(!0),void s.hide();u(!1);const h=Math.max(1,Math.ceil(n/o));l>h&&(l=h);const v=(l-1)*o,y=v+o;i.slice(v,y).show(),a.find(".video-card:visible .video-wrapper").each((function(){const e=t(this);e.data("mounted")||p(e)})),function(e){s.empty(),e=Math.max(1,e);const a=({html:e,text:a,page:i,disabled:n,isActive:o,ariaLabel:c})=>{const r=t("<button/>",{class:"page-btn"+(o?" is-active":""),type:"button","aria-label":c||void 0});null!=e?r.html(e):r.text(a||""),n||o?r.prop("disabled",!0):r.on("click",(function(){g(),l=i,w(),m(),b()})),s.append(r)};a({html:'<i class="fas fa-angle-double-left"></i>',page:Math.max(1,l-1),disabled:l<=1,isActive:!1,ariaLabel:"Previous page"});for(let t=1;t<=e;t++)a({text:String(t),page:t,disabled:!1,isActive:t===l,ariaLabel:`Page ${t}`});a({html:'<i class="fas fa-angle-double-right"></i>',page:Math.min(e,l+1),disabled:l>=e,isActive:!1,ariaLabel:"Next page"}),s.show()}(h)}function y(t,e){g(),c=t||"*",r=e||"*",l=1,w(),m(),requestAnimationFrame((()=>b()))}t("#catNav").on("click",".cat-toggle",(function(e){e.preventDefault();const a=t(this),i=a.closest(".cat"),s=a.data("cat");t("#catNav .cat").not(i).removeClass("is-open"),i.addClass("is-open"),t("#catNav .cat-toggle").removeClass("is-active").attr("aria-expanded","false"),a.addClass("is-active").attr("aria-expanded","true"),t("#catNav .sub-link").removeClass("is-active"),y(s,"*")})),t("#catNav").on("click",".sub-link",(function(e){e.preventDefault();const a=t(this),i=a.data("cat"),s=a.data("sub");t("#catNav .sub-link").removeClass("is-active"),a.addClass("is-active");const n=a.closest(".cat");t("#catNav .cat").removeClass("is-open"),n.addClass("is-open"),t("#catNav .cat-toggle").removeClass("is-active").attr("aria-expanded","false"),n.find(".cat-toggle").addClass("is-active").attr("aria-expanded","true"),y(i,s)})),t("#collapseBtn").on("click",(function(a){a.preventDefault(),e.toggleClass("is-collapsed"),t(this).children("i").first().attr("class",e.hasClass("is-collapsed")?"fas fa-angle-double-right":"fas fa-angle-double-left")})),t((function(){a.css("display","grid").show(),i.length&&i.hide();let e=t('#catNav .cat-toggle[data-cat="gases"]').first();e.length||(e=t("#catNav .cat-toggle").first());const s=e.closest(".cat");t("#catNav .cat").removeClass("is-open"),s.addClass("is-open"),t("#catNav .cat-toggle").removeClass("is-active").attr("aria-expanded","false"),e.addClass("is-active").attr("aria-expanded","true"),c=e.data("cat")||n,r="*",l=1,w()}))}(jQuery);