!function(t){"use strict";const e=["movie","dev","system","plan"];function n(t){return(t||"/").replace(/\/+$/,"")||"/"}function o(t){const e=String(t||"").replace(/^#/,"").trim();return/^[A-Za-z0-9_-]+$/.test(e)?e:""}function i(){const t=getComputedStyle(document.documentElement).getPropertyValue("--header-h"),e=parseInt(t,10);return Number.isFinite(e)&&e>0?e:80}function r(t){if(!(t=o(t)))return;const e=document.getElementById(t);if(!e)return;const n=e.getBoundingClientRect().top+window.pageYOffset-i()-8;window.scrollTo({top:n,behavior:"smooth"})}function c(){const i=t(".submenu-tabs");if(!i.length)return null;const r=i.find(".container").first();if(!r.length)return null;const c=r.find("ul.submenu-list").first();if(c.length)return c;const s={};t("#primary-menu li.menu-item-has-children ul.sub-menu a").each((function(){const e=function(t){try{return new URL(t,location.href)}catch(t){return null}}((t(this).attr("href")||"").trim());if(!e||!e.hash)return;if(n(e.pathname)!==n(location.pathname))return;const i=o(e.hash),r=t.trim(t(this).text());i&&r&&(s[i]=r)}));const a={movie:"Video Production",dev:"Implementation & Programming",system:"System & Tool Development",plan:"Planning"},u=t("<ul/>",{class:"submenu-list"});return e.forEach((function(e){const n=o(e);if(!n)return;const i=s[n]||a[n]||n,r=t("<a/>",{href:"#"+n}).text(i),c=t("<li/>").append(r);u.append(c)})),r.empty().append(u),u}function s(t,e){e=o(e),t&&t.length&&e&&(t.find("a").removeClass("active"),t.find('a[href="#'+e+'"]').addClass("active"))}t((function(){if(!e.some((t=>document.getElementById(t))))return;const n=c(),a=o(location.hash)||"movie";document.getElementById(a)?s(n,a):s(n,"movie"),n&&n.length&&n.off("click.serviceTabs").on("click.serviceTabs","a",(function(e){const i=o(t(this).attr("href"));i&&document.getElementById(i)&&(e.preventDefault(),e.stopPropagation(),function(t){if(t=o(t))try{history&&history.replaceState?history.replaceState(null,"","#"+t):location.hash=t}catch(e){location.hash=t}}(i),s(n,i),requestAnimationFrame((()=>{r(i),setTimeout((()=>r(i)),120)})))}));let u=!1;t(window).off("scroll.serviceSpy").on("scroll.serviceSpy",(function(){u||(u=!0,requestAnimationFrame((function(){u=!1;const t=function(){const t=window.pageYOffset+i()+10;let n=null;return e.forEach((function(e){const o=document.getElementById(e);o&&o.offsetTop<=t&&(n=e)})),o(n)}();t&&s(n,t)})))})),t(window).off("hashchange.serviceHash").on("hashchange.serviceHash",(function(){const t=o(location.hash);t&&document.getElementById(t)&&(s(n,t),requestAnimationFrame((()=>r(t))))}))}))}(jQuery);